<div class="intro-wrapper">

  <!-- Cabe√ßalho -->
  <header class="intro-header">
    <div class="pill">Li√ß√£o 3 ‚Äî Educa√ß√£o Financeira</div>
    <h1 class="intro-title">
      Como a educa√ß√£o financeira muda sua vida <span class="emoji">üí°</span>
    </h1>
    <p class="intro-sub">3 pontos-chave + um quiz rapidinho. Bora l√°! üöÄ</p>
  </header>

  <!-- Passos curtos (Duolingo style) -->
  <section class="cards">
    @for (s of steps; track s.title) {
      <div class="card-step">
        <div class="card-icon">{{ s.icon }}</div>
        <div class="card-title">{{ s.title }}</div>
        <p class="card-text">{{ s.text }}</p>
      </div>
    }
  </section>

  <!-- Micro-quiz -->
  <section class="quiz">
    <h2 class="quiz-title">Quiz r√°pido</h2>

    @for (q of questions(); track q.id; let i = $index) {
      <div class="quiz-item">
        <div class="q-text">{{ q.text }}</div>

        <div class="q-actions">
          <button type="button"
                  class="btn opt"
                  [class.active]="q.user === 'V'"
                  (click)="mark('V', i)">
            Verdadeiro
          </button>
          <button type="button"
                  class="btn opt"
                  [class.active]="q.user === 'F'"
                  (click)="mark('F', i)">
            Falso
          </button>
        </div>

        <!-- FEEDBACK POR PERGUNTA (s√≥ depois de clicar em Concluir e se estiver ERRADA) -->
        @if (shouldShowStatus(q)) {
          <div class="inline-feedback">
            <span class="pill-status pill-status-error">
              <span class="pill-truth">
                {{ q.correct === 'V' ? '√â VERDADEIRO' : '√â FALSO' }}
              </span>
              <span class="pill-emoji">‚ùå</span>
            </span>

            <p class="q-explanation">
              {{ q.explanation }}
            </p>
          </div>
        }
      </div>
    }

    <!-- Feedback geral -->
    @if (showFeedback() === 'erro') {
      <div class="alert alert-erro">
        ‚ùå Quase l√°! Responda todas as perguntas e confira as alternativas marcadas.
      </div>
    }

    @if (showFeedback() === 'ok') {
      <div class="alert alert-ok">
        ‚úÖ Boa! Li√ß√£o conclu√≠da. Seu progresso foi atualizado na trilha. üíö
      </div>
    }

    <!-- A√ß√µes -->
    <div class="actions">
      <button type="button"
              class="btn btn-concluir"
              [disabled]="!allAnswered()"
              (click)="concluir()">
        Concluir
      </button>

      <button type="button"
              class="btn btn-ghost"
              (click)="voltar()">
        Voltar
      </button>
    </div>
  </section>
</div>
