<div class="game-wrapper">
  <!-- Cabe√ßalho -->
  <header class="game-header">
    <div class="pill">Fase 02 ‚Äî Jogo</div>
    <h1 class="game-title">
      Voc√™ sabe lidar com dinheiro? <span class="emoji">üéØ</span>
    </h1>
    <p class="game-sub">Responda V/F. Acerte tudo para concluir. üöÄ</p>
  </header>

  <!-- Dicas -->
  <section class="tips">
    @for (t of tips; track t.text) {
      <div class="tip">
        <span class="tip-icon">{{ t.icon }}</span>
        <span class="tip-text">{{ t.text }}</span>
      </div>
    }
  </section>

  <!-- Quiz -->
  <section class="quiz">
    <h2 class="quiz-title">Verdadeiro ou Falso?</h2>

    @for (q of questions(); track q.id; let i = $index) {
      <div class="quiz-item">
        <div class="q-row">
          <div class="q-text">{{ q.text }}</div>
        </div>

        <div class="q-actions">
          <button
            type="button"
            class="btn opt"
            [class.active]="q.user==='V'"
            (click)="mark('V', i)">
            V
          </button>

          <button
            type="button"
            class="btn opt"
            [class.active]="q.user==='F'"
            (click)="mark('F', i)">
            F
          </button>
        </div>

        <!-- FEEDBACK POR PERGUNTA (s√≥ depois de CONCLUIR e se estiver errada) -->
        @if (shouldShowStatus(q)) {
          <div class="inline-feedback">
            <span class="pill-status pill-status-error">
              <span class="pill-truth">
                {{ q.answer === 'V' ? '√â VERDADEIRO' : '√â FALSO' }}
              </span>
              <span class="pill-emoji">‚ùå</span>
            </span>

            <p class="q-explanation">
              {{ q.explanation }}
            </p>
          </div>
        }
      </div>
    }
  </section>

  <!-- Painel final -->
  <section class="panel">
    @if (showFeedback() === 'erro') {
      <div class="alert alert-erro">
        ‚ùå Voc√™ acertou {{ correctCount() }}/{{ questions().length }}.
        Revise os itens marcados como incorretos.
      </div>
    }

    @if (showFeedback() === 'ok') {
      <div class="alert alert-ok">
        ‚úÖ Excelente! Atividade conclu√≠da. Voltando √† trilha‚Ä¶
      </div>
    }

    <div class="actions">
      <button
        type="button"
        class="btn btn-concluir"
        [disabled]="!allAnswered()"
        (click)="concluir()">
        Concluir
      </button>

      <!-- Voltar para a tela Trilha de Aprendizagem -->
      <button
        type="button"
        class="btn btn-ghost"
        [disabled]="submitting()"
        (click)="voltar()">
        Voltar
      </button>
    </div>
  </section>
</div>
