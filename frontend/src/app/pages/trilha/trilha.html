<div class="container-fluid vh-100 bg-dark text-white p-0 d-flex">
  <!-- Layout principal: ocupa a tela toda, usa tema escuro e exibe a sidebar e o conteÃºdo lado a lado -->
  
  <aside class="sidebar d-flex flex-column p-3">
    <!-- Barra lateral com logo e menu -->
    <h2 class="fw-bold text-white mb-4">MONEVA</h2>
    <ul class="nav flex-column">
      <!-- Cada link usa routerLink para navegar entre rotas do Angular sem recarregar a pÃ¡gina -->
      <li class="nav-item mb-2"><a class="nav-link text-white" routerLink="/home">ğŸ  Home</a></li>
      <li class="nav-item mb-2"><a class="nav-link text-white active" routerLink="/trilha">ğŸ’° Trilha de Aprendizado</a></li>
      <li class="nav-item mb-2"><a class="nav-link text-white" routerLink="/demonstrativos">ğŸ“Š Demonstrativos</a></li>
      <li class="nav-item"><a class="nav-link text-white" routerLink="/conquistas">ğŸ† Conquistas</a></li>
    </ul>
  </aside>

  <main class="flex-grow-1 p-4 bg-black overflow-auto">
    <!-- Ãrea principal onde aparece o conteÃºdo da pÃ¡gina selecionada -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3 class="fw-semibold text-success">Trilha de Aprendizado</h3>
      <!-- BotÃ£o para zerar o progresso das liÃ§Ãµes -->
      <button class="btn btn-outline-light btn-sm" (click)="resetProgress()">Resetar progresso</button>
    </div>

    <div class="trilha container py-2">
      <!-- Loop que percorre todas as seÃ§Ãµes da trilha -->
      @for (sec of sections; track sec.id) {
        <section class="trilha__section mb-5">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <!-- TÃ­tulo da seÃ§Ã£o e contador de liÃ§Ãµes concluÃ­das -->
            <h5 class="trilha__title m-0">{{ sec.title }}</h5>
            <small class="activity-count">{{ doneCount(sec) }}/{{ sec.nodes.length }} concluÃ­dos</small>
          </div>

          <!-- Torre vertical que mostra o progresso geral da seÃ§Ã£o -->
          <div class="tower" [style.--progress]="sectionProgress(sec) + '%'">
            <!-- Loop para cada â€œnÃ³â€ (aula ou joguinho) dentro da seÃ§Ã£o -->
            @for (node of sec.nodes; track node.id; let i = $index) {
              <div class="unit-wrap" [class.shift-left]="i % 2 === 0" [class.shift-right]="i % 2 === 1">
                <!-- Cada unidade tem seu prÃ³prio status (bloqueada, liberada, concluÃ­da) -->
                <button type="button"
                        class="unit"
                        [class.unit--lesson]="node.kind === 'lesson'"
                        [class.unit--game]="node.kind === 'game'"
                        [class.is-locked]="getStatus(node.id) === 'locked'"
                        [class.is-unlocked]="getStatus(node.id) === 'unlocked'"
                        [class.is-completed]="getStatus(node.id) === 'completed'"
                        [disabled]="getStatus(node.id) === 'locked'"
                        [routerLink]="routeFor(node.id)">
                  
                  <!-- â€œAnelâ€ que mostra o progresso em porcentagem -->
                  <span class="ring" [style.--p]="progressOf(node.id) + '%'"></span>
                  
                  <!-- Emoji da liÃ§Ã£o ou jogo -->
                  <span class="icon">{{ node.emoji }}</span>

                  <!-- Ãcones de status (cadeado ou check) -->
                  @if (getStatus(node.id) === 'locked')   { <span class="state">ğŸ”’</span> }
                  @if (getStatus(node.id) === 'completed'){ <span class="state">âœ…</span> }
                </button>

                <!-- TÃ­tulo da unidade -->
                <div class="unit-label text-center" [innerHTML]="node.title"></div>

                <!-- Selo que aparece na unidade atual que o usuÃ¡rio deve comeÃ§ar -->
                @if (isCurrent(sec, i)) {
                  <div class="start-badge">COMEÃ‡AR</div>
                }
              </div>
            }
          </div>
        </section>
      }
    </div>
  </main>
</div>




